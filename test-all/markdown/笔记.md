### 代码

```java
public Result query(FnHallBusinessBean bean, Pageable pageable) {
      UserVO user = UserContext.getCurrentUser();
      if (user == null) {
          return error("获取不到当前用户");
      }
      Sort.Order createSort=new Sort.Order(Sort.Direction.ASC,"createdAt");
      Sort.Order numberSort=new Sort.Order(Sort.Direction.DESC,"sort");
      List< Sort.Order> orders = new ArrayList<>();
      orders.add(numberSort);
      orders.add(createSort);
      Sort sort=new Sort(orders);
      BackAccountVO account = UserContext.getAccount();
      Page<FnHallBusiness> res = fnHallBusinessRepository.findAll((Root<FnHallBusiness> root, CriteriaQuery<?> query, CriteriaBuilder builder) -> {
          Predicate predicate = builder.isNull(root.get("deletedAt"));
          if (account != null) {
              predicate = builder.and(predicate, builder.equal(root.get("tenantId"), account.getId()));
          }
          if (bean.getActId() != null) {
              predicate = builder.and(predicate, builder.equal(root.get("actId"), bean.getActId()));
          }
          if (bean.getStatus() != null) {
              predicate = builder.and(predicate, builder.equal(root.get("status"), bean.getStatus()));
          }
          if (bean.getPid() != null) {
              predicate = builder.and(predicate, builder.equal(root.get("pid"), bean.getPid()));
          }
          if (StringUtils.hasText(bean.getKeyword())) {
              Predicate like = builder.like(root.get("displayName"), "%" + bean.getKeyword() + "%");
              like = builder.or(like, builder.like(root.get("logo"), "%" + bean.getKeyword() + "%"));
              like = builder.or(like, builder.like(root.get("url"), "%" + bean.getKeyword() + "%"));
              predicate = builder.and(predicate, like);
          }
          query.distinct(true).where(predicate);
          return query.getRestriction();
      }, new PageRequest(pageable.getPageNumber(), pageable.getPageSize(), sort));
      String json = JSON.toJSONString(res);
      System.out.println(json);
      return success(res);
  }
```
